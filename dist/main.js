(()=>{"use strict";const e=()=>{const e=document.createElement("div");return e.classList.add("heart"),e},t=(e,t,o)=>{let r,i=Math.floor(60*Math.random()+20);return"asteroid"==e?r=((e,t,o)=>{const r=document.createElement("div");return r.classList.add("asteroid"),r.style.left=e+"%",r.style.bottom="100%",r.style.animationDuration=o+"s",r})(i,0,t):"powerUp"==e&&(r=((e,t,o,r)=>{const a=document.createElement("div");return a.classList.add("powerUp",e+"PU"),a.style.left=o+"%",a.style.bottom="100%",a.style.animationDuration=t+"s",a.style.backgroundImage="url(./img/"+e+"PowerUp.png)",a})(o,t,i)),a.appendElement(r),{getLocation:e=>"x"==e?r.left:r.bottom,getUI:()=>r,powerUpName:o}},o=(()=>{let e=0,t=0;const o=[],r=[],i={x:50,y:45,shield:!1};return{getRocket:e=>i[e],setRocket:(e,t)=>i[e]=t,hasShield:()=>i.shield,addShield:e=>{i.shield=!0,a.addShield(e)},removeShield:()=>i.shield=!1,removeAsteroid:e=>{setTimeout((()=>{a.removeElement(o.shift().getUI())}),e)},addAsteroid:e=>o.push(e),getAsteroids:()=>o,removePowerUp:e=>{setTimeout((()=>{a.removeElement(r.shift().getUI())}),e)},addPowerUp:e=>r.push(e),getPowerUps:()=>r,getTime:()=>t,addTime:()=>t++,time:t,getLives:()=>e,updateLives:t=>e+=t,gameOn:()=>!0,gameStatus:!0}})(),r=(()=>{let e,r,s;const d=e=>{o.updateLives(e),a.updateHearts()},c=()=>{let e=a.getActualRocket(),t=e.left,r=e.top;o.getPowerUps().forEach((i=>{let s=i.getUI().getBoundingClientRect(),c=s.left,l=s.top;r+e.height<l||r>l+s.height||t+e.width<c||t>c+s.width||("heart"==i.powerUpName?d(1):"shield"==i.powerUpName&&(o.removeShield(),a.removeShield(),o.addShield(8)),a.removeElement(document.querySelector("."+i.powerUpName+"PU")))})),o.hasShield()||o.getAsteroids().forEach((a=>{let s=a.getUI().getBoundingClientRect(),c=s.left,l=s.top;if(!(r+e.height<l||r>l+s.height||t+e.width<c||t>c+s.width)){if(d(-1),0==o.getLives())return void i.stop();o.addShield(3.5)}}))},l=(e,r)=>{let a=3-Math.log10(Math.abs(.75*o.getTime()-6));"asteroid"==e?(o.addAsteroid(t(e,a)),o.removeAsteroid(1e3*a)):"powerUp"==e&&(o.addPowerUp(t(e,a,r)),o.removePowerUp(1e3*a))},n=()=>{a.appendElement(((e,t)=>{const o=document.createElement("div");return o.classList.add("rocket"),o.style.left="50%",o.style.bottom="calc(45% - 69px)",o})())};return{checkMove:e=>{if(o.gameOn()){if("ArrowLeft"==e||"a"==e){if(o.getRocket("x")<=15)return;o.setRocket("x",o.getRocket("x")-7)}else if("ArrowRight"==e||"d"==e){if(o.getRocket("x")>=85)return;o.setRocket("x",o.getRocket("x")+7)}else if("ArrowUp"==e||"w"==e){if(o.getRocket("y")>=80)return;o.setRocket("y",o.getRocket("y")+7)}else if("ArrowDown"==e||"s"==e){if(o.getRocket("y")<=20)return;o.setRocket("y",o.getRocket("y")-7)}a.moveRocket()}},checkCrash:c,createObject:l,createRocket:n,changeLives:d,startGame:()=>{e=setInterval((()=>{o.addTime(),a.updateScore()}),1e3),d(3),n(),a.startRocket(),a.start();let t=()=>{0!=o.gameOn()&&(l("asteroid"),s=setTimeout(t,2e3-Math.min(50*o.getTime(),1550)))};t(),r=setInterval((()=>{c()}),70)},stopGame:()=>{o.time=0,clearInterval(e),o.setRocket("x",50),o.setRocket("y",45),clearInterval(r),clearTimeout(s),a.stop(),o.gameStatus=!1}}})(),a=(()=>{const t=document.querySelector("#container"),a=document.querySelector(".score"),i=document.querySelector("#score"),s=document.querySelector(".hearts");let d,c;return{moveRocket:()=>{d.style.left=o.getRocket("x")+"%",d.style.bottom="calc("+o.getRocket("y")+"% - 69px)"},getActualRocket:()=>d.getBoundingClientRect(),appendElement:e=>{t.appendChild(e)},removeElement:e=>{t.removeChild(e)},updateScore:()=>{i.textContent=10*o.getTime()},updateHearts:()=>{let t=o.getLives(),r=s.childElementCount,a=t-r;if(a<0){if(0==r)return;for(;0!=a;)s.removeChild(s.lastChild),a++}else for(;0!=a;)s.appendChild(e()),a--},startRocket:()=>{d=document.querySelector(".rocket")},addShield:e=>{d.classList.add("shield"),d.style.animationDuration=e+"s",c=setTimeout((()=>{d.classList.remove("shield"),o.removeShield()}),1e3*e)},removeShield:()=>{d.classList.remove("shield"),clearTimeout(c)},start:()=>{try{t.removeChild(document.querySelector(".start"))}catch{}try{t.removeChild(document.querySelector(".gameOver"))}catch{}t.style.animation="moveSky 14s linear infinite",window.addEventListener("keyup",(e=>{r.checkMove(e.key)})),a.style.opacity=1,null==document.querySelector(".audio")?t.appendChild((()=>{const e=document.createElement("audio");return e.classList.add("audio"),e.innerHTML='<audio autoplay loop><source src="./music.mp3" type="audio/mpeg"></audio>',e})()):document.querySelector(".audio").play()},stop:()=>{window.removeEventListener("keyup",(e=>{r.checkMove(e.key)})),t.removeChild(d),a.style.opacity=0,t.style.animation="",t.removeChild(document.querySelector(".audio")),t.appendChild((()=>{const e=document.createElement("div");return e.classList.add("gameOver"),e.innerHTML='<div><img src="./img/gameOver.png" class="text"></div>',e.innerHTML+='<div class="buttonDiv"><button id="start"></button></div>',e})())}}})(),i=(()=>{let e=document.querySelector("button#start");const t=()=>{r.startGame(),s.start(),e.removeEventListener("click",t)};return e.addEventListener("click",t),{start:t,stop:()=>{r.stopGame(),s.stop(),e=document.querySelector("button#start"),e.addEventListener("click",(()=>{t()}))}}})(),s=(()=>{let e,t;return{start:()=>{e=setInterval((()=>{Math.random()<.8&&r.createObject("powerUp","heart")}),7500),t=setInterval((()=>{Math.random()<.85&&r.createObject("powerUp","shield")}),13e3)},stop:()=>{clearInterval(e),clearInterval(t)}}})()})();