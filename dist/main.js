(()=>{"use strict";const e=()=>{const e=document.createElement("div");return e.classList.add("heart"),e},t=(()=>{let e=0,t=0;const o=[],s={x:50,y:50,shield:!1};return{getRocket:e=>s[e],setRocket:(e,t)=>s[e]=t,hasShield:()=>s.shield,addShield:()=>{s.shield=!0,r.addShield()},removeShield:()=>s.shield=!1,removeAsteroid:(e,t)=>{setTimeout((()=>{r.removeElement(o[e].getUI()),o.splice(e,1)}),t-50)},addAsteroid:e=>o.push(e),getAsteroids:()=>o,getTime:()=>t,addTime:()=>t++,getLives:()=>e,updateLives:t=>e+=t,gameOn:()=>!0}})(),o=(()=>{const e=e=>{t.updateLives(e),r.updateHearts()},o=()=>{r.appendElement(((e,t)=>{const o=document.createElement("div");return o.classList.add("rocket"),o.style.left="50%",o.style.bottom="calc(50% - 69px)",o})())};return{checkMove:e=>{if(t.gameOn()){if("ArrowLeft"==e||"a"==e){if(15==t.getRocket("x"))return;t.setRocket("x",t.getRocket("x")-5)}else if("ArrowRight"==e||"d"==e){if(85==t.getRocket("x"))return;t.setRocket("x",t.getRocket("x")+5)}else if("ArrowUp"==e||"w"==e){if(80==t.getRocket("y"))return;t.setRocket("y",t.getRocket("y")+5)}else if("ArrowDown"==e||"s"==e){if(20==t.getRocket("y"))return;t.setRocket("y",t.getRocket("y")-5)}r.moveRocket()}},checkCrash:()=>{t.hasShield()||t.getAsteroids().forEach((e=>{}))},createObject:e=>{let o=3-Math.log10(Math.abs(.75*t.getTime()-6)),s=t.getAsteroids().length;t.addAsteroid(((e,t,o)=>{let s=Math.floor(60*Math.random()+20);return"Asteroid"==e?((e,t,o)=>{const r=document.createElement("div");r.classList.add("asteroid"),r.style.left=e+"%",r.style.bottom="100%",r.style.animationDuration=o+"s"})(s,0,t):"PowerUp"==e&&((e,t)=>{const o=document.createElement("div");o.classList.add("powerUp"),o.style.left=Math.floor(60*Math.random()+20),o.style.bottom=100,o.style.animationDuration="100s",o.style.backgroundImage=`./img/${e}PowerUp.png`})(s),r.appendElement(ui),{getLocation:e=>"x"==e?ui.left:ui.bottom,getIndex:()=>o,getUI:()=>ui}})(e,o)),t.removeAsteroid(s,1e3*o)},createRocket:o,changeLives:e,startGame:()=>{setInterval((()=>{t.addTime(),r.updateScore()}),1e3),e(3),o(),r.startRocket(),r.start()}}})(),r=(()=>{const r=document.querySelector("#container"),s=document.querySelector(".score"),i=document.querySelector("#score"),a=document.querySelector(".hearts");let d;return{moveRocket:()=>{d.style.left=t.getRocket("x")+"%",d.style.bottom="calc("+t.getRocket("y")+"% - 69px)"},appendElement:e=>{r.appendChild(e)},removeElement:e=>{r.removeChild(e)},updateScore:()=>{i.textContent=10*t.getTime()},updateHearts:()=>{let o=t.getLives()-a.childElementCount;if(o<0)for(;0!=o;)a.removeChild(a.lastChild),o++;else for(;0!=o;)a.appendChild(e()),o--},startRocket:()=>{d=document.querySelector(".rocket")},addShield:()=>{d.classList.add("shield"),setTimeout((()=>{d.classList.remove("shield"),t.removeShield()}),8e3)},start:()=>{r.appendChild((()=>{const e=document.createElement("audio");return e.classList.add("audio"),e.innerHTML='<audio autoplay loop><source src="./music.mp3" type="audio/mpeg"></audio>',e.play(),e})()),r.removeChild(document.querySelector(".start")),window.addEventListener("keyup",(e=>{o.checkMove(e.key)})),s.style.opacity=1,r.style.animation="moveSky 14s linear infinite"},stop:()=>{window.removeEventListener("keyup",(e=>{o.checkMove(e.key)})),s.style.opacity=0,r.style.animation="",r.removeChild(document.querySelector(".audio"))}}})();(()=>{let e=document.querySelector("button#start");const t=()=>{o.startGame(),e.removeEventListener("click",t)};e.addEventListener("click",t)})(),setTimeout((()=>{Math.random()}),6400),setTimeout((()=>{Math.random()}),14500)})();