(()=>{"use strict";const e=()=>{const e=document.createElement("div");return e.classList.add("heart"),e},t=(e,t)=>{let o,r=Math.floor(60*Math.random()+20);return"asteroid"==e?o=((e,t,o)=>{const r=document.createElement("div");return r.classList.add("asteroid"),r.style.left=e+"%",r.style.bottom="100%",r.style.animationDuration=o+"s",r})(r,0,t):"powerUp"==e&&(o=((e,t)=>{const o=document.createElement("div");o.classList.add("powerUp"),o.style.left=Math.floor(60*Math.random()+20),o.style.bottom=100,o.style.animationDuration="100s",o.style.backgroundImage=`./img/${e}PowerUp.png`})(r)),s.appendElement(o),{getLocation:e=>"x"==e?o.left:o.bottom,getUI:()=>o}},o=(()=>{let e=0,t=0;const o=[],r=[],i={x:50,y:50,shield:!1};return{getRocket:e=>i[e],setRocket:(e,t)=>i[e]=t,hasShield:()=>i.shield,addShield:e=>{i.shield=!0,s.addShield(e)},removeShield:()=>i.shield=!1,removeAsteroid:e=>{setTimeout((()=>{s.removeElement(o.shift().getUI())}),e)},addAsteroid:e=>o.push(e),getAsteroids:()=>o,removePowerUp:(e,t)=>{setTimeout((()=>{s.removeElement(r[e].getUI()),r.splice(e,1)}),t)},addPowerUp:e=>r.push(e),getPowerUps:()=>r,getTime:()=>t,addTime:()=>t++,getLives:()=>e,updateLives:t=>e+=t,gameOn:()=>!0}})(),r=(()=>{const e=e=>{o.updateLives(e),s.updateHearts()},r=()=>{if(o.hasShield())return;let e=s.getActualRocket(),t=e.left,r=e.top;o.getAsteroids().forEach((o=>{let s=o.getUI().getBoundingClientRect(),i=s.left,a=s.top;r+e.height<a||r>a+s.height||t+e.width<i||t>i+s.width||console.log("Collision")}))},i=e=>{let r=3-Math.log10(Math.abs(.75*o.getTime()-6));"asteroid"==e?(o.addAsteroid(t(e,r)),o.removeAsteroid(1e3*r)):"powerUp"==e&&(o.addPowerUp(t(e,r)),o.removePowerUp(1e3*r))},a=()=>{s.appendElement(((e,t)=>{const o=document.createElement("div");return o.classList.add("rocket"),o.style.left="50%",o.style.bottom="calc(50% - 69px)",o})())};return{checkMove:e=>{if(o.gameOn()){if("ArrowLeft"==e||"a"==e){if(15==o.getRocket("x"))return;o.setRocket("x",o.getRocket("x")-5)}else if("ArrowRight"==e||"d"==e){if(85==o.getRocket("x"))return;o.setRocket("x",o.getRocket("x")+5)}else if("ArrowUp"==e||"w"==e){if(80==o.getRocket("y"))return;o.setRocket("y",o.getRocket("y")+5)}else if("ArrowDown"==e||"s"==e){if(20==o.getRocket("y"))return;o.setRocket("y",o.getRocket("y")-5)}s.moveRocket()}},checkCrash:r,createObject:i,createRocket:a,changeLives:e,startGame:()=>{setInterval((()=>{o.addTime(),s.updateScore()}),1e3),e(3),a(),s.startRocket(),s.start();let t=()=>{o.gameOn()&&(i("asteroid"),setTimeout(t,2e3-Math.min(50*o.getTime(),1600)))};t(),setInterval((()=>{r()}),70)}}})(),s=(()=>{const t=document.querySelector("#container"),s=document.querySelector(".score"),i=document.querySelector("#score"),a=document.querySelector(".hearts");let d;return{moveRocket:()=>{d.style.left=o.getRocket("x")+"%",d.style.bottom="calc("+o.getRocket("y")+"% - 69px)"},getActualRocket:()=>d.getBoundingClientRect(),appendElement:e=>{t.appendChild(e)},removeElement:e=>{t.removeChild(e)},updateScore:()=>{i.textContent=10*o.getTime()},updateHearts:()=>{let t=o.getLives()-a.childElementCount;if(t<0)for(;0!=t;)a.removeChild(a.lastChild),t++;else for(;0!=t;)a.appendChild(e()),t--},startRocket:()=>{d=document.querySelector(".rocket")},addShield:e=>{d.classList.add("shield"),setTimeout((()=>{d.classList.remove("shield"),o.removeShield()}),e)},start:()=>{t.appendChild((()=>{const e=document.createElement("audio");return e.classList.add("audio"),e.innerHTML='<audio autoplay loop><source src="./music.mp3" type="audio/mpeg"></audio>',e.play(),e})()),t.removeChild(document.querySelector(".start")),window.addEventListener("keyup",(e=>{r.checkMove(e.key)})),s.style.opacity=1,t.style.animation="moveSky 14s linear infinite"},stop:()=>{window.removeEventListener("keyup",(e=>{r.checkMove(e.key)})),s.style.opacity=0,t.style.animation="",t.removeChild(document.querySelector(".audio"))}}})();(()=>{let e=document.querySelector("button#start");const t=()=>{r.startGame(),e.removeEventListener("click",t)};e.addEventListener("click",t)})(),setTimeout((()=>{Math.random()}),6400),setTimeout((()=>{Math.random()}),14500)})();